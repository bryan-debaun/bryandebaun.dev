{"openapi":"3.0.0","components":{"examples":{},"headers":{},"parameters":{},"requestBodies":{},"responses":{},"schemas":{"RatingWithDetails":{"description":"Rating with book and user details","properties":{"id":{"type":"number","format":"double"},"bookId":{"type":"number","format":"double"},"userId":{"type":"number","format":"double"},"rating":{"type":"number","format":"double"},"review":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"},"book":{"properties":{"title":{"type":"string"},"id":{"type":"number","format":"double"}},"required":["title","id"],"type":"object"},"user":{"properties":{"email":{"type":"string"},"id":{"type":"number","format":"double"}},"required":["email","id"],"type":"object"}},"required":["id","bookId","userId","rating","createdAt","updatedAt"],"type":"object","additionalProperties":false},"ListRatingsResponse":{"description":"List ratings response","properties":{"ratings":{"items":{"$ref":"#/components/schemas/RatingWithDetails"},"type":"array"},"total":{"type":"number","format":"double"}},"required":["ratings","total"],"type":"object","additionalProperties":false},"Rating":{"description":"Rating representation","properties":{"id":{"type":"number","format":"double"},"bookId":{"type":"number","format":"double"},"userId":{"type":"number","format":"double"},"rating":{"type":"number","format":"double"},"review":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","bookId","userId","rating","createdAt","updatedAt"],"type":"object","additionalProperties":false},"CreateRatingRequest":{"description":"Create or update rating request","properties":{"bookId":{"type":"number","format":"double"},"rating":{"type":"number","format":"double"},"review":{"type":"string"}},"required":["bookId","rating"],"type":"object","additionalProperties":false},"BookWithAuthors":{"description":"Book with author information","properties":{"id":{"type":"number","format":"double"},"title":{"type":"string"},"description":{"type":"string"},"isbn":{"type":"string"},"publishedAt":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"},"authors":{"items":{"properties":{"name":{"type":"string"},"id":{"type":"number","format":"double"}},"required":["name","id"],"type":"object"},"type":"array"}},"required":["id","title","createdAt","updatedAt"],"type":"object","additionalProperties":false},"ListBooksResponse":{"description":"List books response","properties":{"books":{"items":{"$ref":"#/components/schemas/BookWithAuthors"},"type":"array"},"total":{"type":"number","format":"double"}},"required":["books","total"],"type":"object","additionalProperties":false},"Book":{"description":"Book representation","properties":{"id":{"type":"number","format":"double"},"title":{"type":"string"},"description":{"type":"string"},"isbn":{"type":"string"},"publishedAt":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","title","createdAt","updatedAt"],"type":"object","additionalProperties":false},"CreateBookRequest":{"description":"Create book request","properties":{"title":{"type":"string"},"description":{"type":"string"},"isbn":{"type":"string"},"publishedAt":{"type":"string"},"authorIds":{"items":{"type":"number","format":"double"},"type":"array"}},"required":["title"],"type":"object","additionalProperties":false},"UpdateBookRequest":{"description":"Update book request","properties":{"title":{"type":"string"},"description":{"type":"string"},"isbn":{"type":"string"},"publishedAt":{"type":"string"},"authorIds":{"items":{"type":"number","format":"double"},"type":"array"}},"type":"object","additionalProperties":false},"AuthorWithBooks":{"description":"Author with books","properties":{"id":{"type":"number","format":"double"},"name":{"type":"string"},"bio":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"},"books":{"items":{"properties":{"title":{"type":"string"},"id":{"type":"number","format":"double"}},"required":["title","id"],"type":"object"},"type":"array"}},"required":["id","name","createdAt","updatedAt"],"type":"object","additionalProperties":false},"ListAuthorsResponse":{"description":"List authors response","properties":{"authors":{"items":{"$ref":"#/components/schemas/AuthorWithBooks"},"type":"array"},"total":{"type":"number","format":"double"}},"required":["authors","total"],"type":"object","additionalProperties":false},"Author":{"description":"Author representation","properties":{"id":{"type":"number","format":"double"},"name":{"type":"string"},"bio":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","name","createdAt","updatedAt"],"type":"object","additionalProperties":false},"CreateAuthorRequest":{"description":"Create author request","properties":{"name":{"type":"string"},"bio":{"type":"string"},"website":{"type":"string"}},"required":["name"],"type":"object","additionalProperties":false},"UpdateAuthorRequest":{"description":"Update author request","properties":{"name":{"type":"string"},"bio":{"type":"string"},"website":{"type":"string"}},"type":"object","additionalProperties":false}},"securitySchemes":{"jwt":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"info":{"title":"MCP Server API","version":"0.1.0","description":"REST API for MCP Server with books, authors, ratings, and admin operations","license":{"name":"MIT"},"contact":{"name":"Bryan DeBaun","email":"bryan@debaun.dev"}},"paths":{"/api/ratings":{"get":{"operationId":"ListRatings","responses":{"200":{"description":"Ratings retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListRatingsResponse"}}}},"500":{"description":"Internal server error"}},"description":"List ratings with optional filtering","summary":"Get a list of ratings","tags":["Ratings"],"security":[],"parameters":[{"description":"Filter by book ID","in":"query","name":"bookId","required":false,"schema":{"format":"double","type":"number"}},{"description":"Filter by user ID","in":"query","name":"userId","required":false,"schema":{"format":"double","type":"number"}},{"description":"Minimum rating value (1-10)","in":"query","name":"minRating","required":false,"schema":{"format":"double","type":"number"}},{"description":"Maximum number of results (default 50)","in":"query","name":"limit","required":false,"schema":{"format":"double","type":"number"}},{"description":"Number of results to skip (default 0)","in":"query","name":"offset","required":false,"schema":{"format":"double","type":"number"}}]},"post":{"operationId":"CreateRating","responses":{"201":{"description":"Rating created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Rating"}}}},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"404":{"description":"Book not found"},"500":{"description":"Internal server error"}},"description":"Create or update a rating (authenticated users)","summary":"Create or update a rating for a book","tags":["Ratings"],"security":[{"jwt":[]}],"parameters":[],"requestBody":{"description":"Rating data","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRatingRequest","description":"Rating data"}}}}}},"/api/ratings/{id}":{"delete":{"operationId":"DeleteRating","responses":{"200":{"description":"Rating deleted successfully","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"}},"required":["success"],"type":"object"}}}},"400":{"description":"Invalid rating ID"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Rating not found"},"500":{"description":"Internal server error"}},"description":"Delete a rating (owner or admin only)","summary":"Delete a rating by ID","tags":["Ratings"],"security":[{"jwt":[]}],"parameters":[{"description":"Rating ID","in":"path","name":"id","required":true,"schema":{"format":"double","type":"number"}}]}},"/api/books":{"get":{"operationId":"ListBooks","responses":{"200":{"description":"Books retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListBooksResponse"}}}},"500":{"description":"Internal server error"}},"description":"List books with optional filtering","summary":"Get a list of books","tags":["Books"],"security":[],"parameters":[{"description":"Filter by author ID","in":"query","name":"authorId","required":false,"schema":{"format":"double","type":"number"}},{"description":"Minimum average rating (1-10)","in":"query","name":"minRating","required":false,"schema":{"format":"double","type":"number"}},{"description":"Search in title and description","in":"query","name":"search","required":false,"schema":{"type":"string"}},{"description":"Maximum number of results (default 50)","in":"query","name":"limit","required":false,"schema":{"format":"double","type":"number"}},{"description":"Number of results to skip (default 0)","in":"query","name":"offset","required":false,"schema":{"format":"double","type":"number"}}]},"post":{"operationId":"CreateBook","responses":{"201":{"description":"Book created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"description":"Create a new book (admin only)","summary":"Create a new book","tags":["Books"],"security":[{"jwt":["admin"]}],"parameters":[],"requestBody":{"description":"Book data","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBookRequest","description":"Book data"}}}}}},"/api/books/{id}":{"get":{"operationId":"GetBook","responses":{"200":{"description":"Book retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookWithAuthors"}}}},"400":{"description":"Invalid book ID"},"404":{"description":"Book not found"}},"description":"Get a book by ID","summary":"Get book details by ID","tags":["Books"],"security":[],"parameters":[{"description":"Book ID","in":"path","name":"id","required":true,"schema":{"format":"double","type":"number"}}]},"put":{"operationId":"UpdateBook","responses":{"200":{"description":"Book updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"404":{"description":"Book not found"},"500":{"description":"Internal server error"}},"description":"Update a book (admin only)","summary":"Update an existing book","tags":["Books"],"security":[{"jwt":["admin"]}],"parameters":[{"description":"Book ID","in":"path","name":"id","required":true,"schema":{"format":"double","type":"number"}}],"requestBody":{"description":"Updated book data","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBookRequest","description":"Updated book data"}}}}},"delete":{"operationId":"DeleteBook","responses":{"200":{"description":"Book deleted successfully","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"}},"required":["success"],"type":"object"}}}},"400":{"description":"Invalid book ID"},"401":{"description":"Unauthorized"},"404":{"description":"Book not found"},"500":{"description":"Internal server error"}},"description":"Delete a book (admin only)","summary":"Delete a book by ID","tags":["Books"],"security":[{"jwt":["admin"]}],"parameters":[{"description":"Book ID","in":"path","name":"id","required":true,"schema":{"format":"double","type":"number"}}]}},"/api/authors":{"get":{"operationId":"ListAuthors","responses":{"200":{"description":"Authors retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListAuthorsResponse"}}}},"500":{"description":"Internal server error"}},"description":"List authors with optional filtering","summary":"Get a list of authors","tags":["Authors"],"security":[],"parameters":[{"description":"Search in author name","in":"query","name":"search","required":false,"schema":{"type":"string"}},{"description":"Maximum number of results (default 50)","in":"query","name":"limit","required":false,"schema":{"format":"double","type":"number"}},{"description":"Number of results to skip (default 0)","in":"query","name":"offset","required":false,"schema":{"format":"double","type":"number"}}]},"post":{"operationId":"CreateAuthor","responses":{"201":{"description":"Author created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Author"}}}},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"description":"Create a new author (admin only)","summary":"Create a new author","tags":["Authors"],"security":[{"jwt":["admin"]}],"parameters":[],"requestBody":{"description":"Author data","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAuthorRequest","description":"Author data"}}}}}},"/api/authors/{id}":{"get":{"operationId":"GetAuthor","responses":{"200":{"description":"Author retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorWithBooks"}}}},"400":{"description":"Invalid author ID"},"404":{"description":"Author not found"}},"description":"Get an author by ID","summary":"Get author details by ID","tags":["Authors"],"security":[],"parameters":[{"description":"Author ID","in":"path","name":"id","required":true,"schema":{"format":"double","type":"number"}}]},"put":{"operationId":"UpdateAuthor","responses":{"200":{"description":"Author updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Author"}}}},"400":{"description":"Invalid request"},"401":{"description":"Unauthorized"},"404":{"description":"Author not found"},"500":{"description":"Internal server error"}},"description":"Update an author (admin only)","summary":"Update an existing author","tags":["Authors"],"security":[{"jwt":["admin"]}],"parameters":[{"description":"Author ID","in":"path","name":"id","required":true,"schema":{"format":"double","type":"number"}}],"requestBody":{"description":"Updated author data","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAuthorRequest","description":"Updated author data"}}}}},"delete":{"operationId":"DeleteAuthor","responses":{"200":{"description":"Author deleted successfully","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean"}},"required":["success"],"type":"object"}}}},"400":{"description":"Invalid author ID"},"401":{"description":"Unauthorized"},"404":{"description":"Author not found"},"500":{"description":"Internal server error"}},"description":"Delete an author (admin only)","summary":"Delete an author by ID","tags":["Authors"],"security":[{"jwt":["admin"]}],"parameters":[{"description":"Author ID","in":"path","name":"id","required":true,"schema":{"format":"double","type":"number"}}]}}},"servers":[{"url":"/"}]}